# Next.js 面试题大全 - 基础篇

## 1. Next.js 基础概念

### Q1: 什么是 Next.js？它的主要特点是什么？

**A:** Next.js 是一个基于 React 的轻量级框架，用于构建全栈 Web 应用程序。

**主要特点：**
- 服务器端渲染 (SSR) 和静态站点生成 (SSG)
- 自动代码分割和优化
- 内置 CSS 和 Sass 支持
- 文件系统路由
- 热模块替换 (HMR)
- API 路由支持
- 图像优化和国际化
- 支持 TypeScript

### Q2: Next.js 中的 Pages Router 和 App Router 有什么区别？

**A:**

**Pages Router (传统)：**
- 使用 `pages/` 目录进行路由
- 基于文件系统的路由
- 支持 `getStaticProps`、`getServerSideProps` 等数据获取方法

**App Router (Next.js 13+)：**
- 使用 `app/` 目录进行路由
- 支持 React 18 的新特性（如 Server Components）
- 更灵活的数据获取方式
- 内置布局支持
- 更好的性能优化

### Q3: 解释 Next.js 中的三种渲染模式

**A:**

1. **静态生成 (SSG - Static Site Generation)**
   - 在构建时生成 HTML
   - 适用于内容不经常变化的页面
   - 最佳性能，页面加载最快

2. **服务器端渲染 (SSR - Server-Side Rendering)**
   - 在每个请求时生成 HTML
   - 适用于需要实时数据的页面
   - 首次加载时间稍长，但 SEO 友好

3. **客户端渲染 (CSR - Client-Side Rendering)**
   - 传统的 SPA 模式
   - 适用于交互性强的页面
   - 首次加载后用户体验流畅

## 2. 路由和页面

### Q4: Next.js 中的文件系统路由是如何工作的？

**A:** Next.js 使用基于文件系统的路由：

```
pages/
├── index.js          # 对应路由: /
├── about.js          # 对应路由: /about
├── blog/
│   ├── index.js      # 对应路由: /blog
│   └── [slug].js     # 对应路由: /blog/:slug
└── api/
    └── hello.js      # API 路由: /api/hello
```

### Q5: 什么是动态路由？如何创建动态路由？

**A:** 动态路由使用方括号 `[]` 创建：

```javascript
// pages/blog/[slug].js
import { useRouter } from 'next/router'

export default function BlogPost() {
  const router = useRouter()
  const { slug } = router.query
  
  return <h1>Blog Post: {slug}</h1>
}
```

### Q6: 解释 catch-all 路由和可选的 catch-all 路由

**A:**

**Catch-all 路由：**
```javascript
// pages/docs/[...slug].js
// 匹配 /docs/a, /docs/a/b, /docs/a/b/c 等
```

**可选的 catch-all 路由：**
```javascript
// pages/docs/[[...slug]].js
// 匹配 /docs, /docs/a, /docs/a/b 等
```

## 3. 数据获取

### Q7: 解释 getStaticProps 的作用和使用场景

**A:** `getStaticProps` 用于在构建时获取数据：

```javascript
export async function getStaticProps() {
  const res = await fetch('https://api.example.com/posts')
  const posts = await res.json()
  
  return {
    props: {
      posts
    },
    revalidate: 120 // 可选：ISR 重新验证时间
  }
}
```

**使用场景：**
- 博客文章、产品页面等静态内容
- 营销页面、文档站点
- 数据不经常变化的页面

### Q8: getServerSideProps 和 getStaticProps 有什么区别？

**A:**

| 特性 | getStaticProps | getServerSideProps |
|------|---------------|-------------------|
| 执行时机 | 构建时 | 每个请求时 |
| 性能 | 最佳（CDN 缓存） | 较慢（服务器计算） |
| SEO | 优秀 | 优秀 |
| 实时数据 | 不支持（除非使用 ISR） | 支持 |
| 适用场景 | 静态内容 | 需要实时数据的页面 |

### Q9: 什么是 Incremental Static Regeneration (ISR)？

**A:** ISR 允许在构建后更新静态页面：

```javascript
export async function getStaticProps() {
  const res = await fetch('https://api.example.com/posts')
  const posts = await res.json()
  
  return {
    props: {
      posts
    },
    revalidate: 60 // 60 秒后重新验证数据
  }
}
```

**优点：**
- 结合了 SSG 的性能和 SSR 的实时性
- 减少构建时间（不需要重新构建整个站点）
- 保持 CDN 缓存优势

### Q10: 客户端数据获取有哪些方式？

**A:**

1. **useEffect + fetch**
```javascript
useEffect(() => {
  fetch('/api/data')
    .then(res => res.json())
    .then(data => setData(data))
}, [])
```

2. **SWR (推荐)**
```javascript
import useSWR from 'swr'

const { data, error } = useSWR('/api/data', fetcher)
```

3. **React Query**
```javascript
import { useQuery } from '@tanstack/react-query'

const { data, isLoading } = useQuery(['data'], fetchData)
```

## 面试建议

### 技术准备
1. **理解核心概念**：确保理解 SSR、SSG、CSR 的区别
2. **掌握数据获取**：熟悉各种数据获取方式的使用场景
3. **了解性能优化**：知道如何优化 Next.js 应用
4. **实践经验**：有实际的 Next.js 项目经验

### 常见陷阱
1. **混淆渲染模式**：清楚何时使用 SSR、SSG 或 CSR
2. **数据获取时机**：理解构建时 vs 请求时的数据获取
3. **路由优先级**：了解文件系统路由的匹配规则
4. **性能考虑**：知道如何分析和优化性能

### 进阶方向
1. **App Router**：学习 Next.js 13+ 的新特性
2. **Server Components**：理解服务器组件的概念
3. **性能优化**：深入学习各种优化技术
4. **全栈开发**：掌握前后端整合开发
