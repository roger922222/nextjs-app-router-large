{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Downloads/nextjs-app-router-large/app/critical-rendering/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\n\nexport default function CriticalRenderingDemo() {\n  const [optimizationEnabled, setOptimizationEnabled] = useState(false);\n  const [loadTime, setLoadTime] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // 模拟页面加载测试\n  const simulatePageLoad = (optimized: boolean) => {\n    setIsLoading(true);\n    const startTime = Date.now();\n    \n    // 模拟不同的加载时间\n    const baseTime = optimized ? 800 : 1500; // 优化后更快\n    const randomDelay = Math.random() * 300;\n    \n    setTimeout(() => {\n      const endTime = Date.now();\n      setLoadTime(endTime - startTime);\n      setIsLoading(false);\n    }, baseTime + randomDelay);\n  };\n\n  const handleOptimizationToggle = () => {\n    const newState = !optimizationEnabled;\n    setOptimizationEnabled(newState);\n    simulatePageLoad(newState);\n  };\n\n  const handleTestLoad = () => {\n    simulatePageLoad(optimizationEnabled);\n  };\n\n  useEffect(() => {\n    // 初始加载测试\n    simulatePageLoad(false);\n  }, []);\n\n  return (\n    <div className=\"p-8 max-w-6xl mx-auto\">\n      <div className=\"text-center mb-8\">\n        <h1 className=\"text-3xl font-bold mb-4\">关键渲染路径优化演示</h1>\n        <p className=\"text-gray-600\">\n          展示关键CSS内联、资源预加载、渲染阻塞优化等技术\n        </p>\n      </div>\n\n      {/* 控制面板 */}\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n        <h2 className=\"text-xl font-semibold mb-4\">优化控制</h2>\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h3 className=\"font-medium\">关键渲染路径优化</h3>\n            <p className=\"text-sm text-gray-600\">启用CSS内联、资源预加载等优化</p>\n          </div>\n          <button\n            onClick={handleOptimizationToggle}\n            className={`px-4 py-2 rounded font-medium ${\n              optimizationEnabled \n                ? 'bg-green-600 text-white hover:bg-green-700' \n                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n            }`}\n          >\n            {optimizationEnabled ? '优化已启用' : '启用优化'}\n          </button>\n        </div>\n        \n        <div className=\"flex space-x-4\">\n          <button\n            onClick={handleTestLoad}\n            disabled={isLoading}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50\"\n          >\n            {isLoading ? '加载中...' : '测试页面加载'}\n          </button>\n        </div>\n      </div>\n\n      {/* 性能对比 */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">优化前</h3>\n          <div className=\"space-y-3\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">首次内容绘制 (FCP)</span>\n              <span className=\"font-medium\">1.8s</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">最大内容绘制 (LCP)</span>\n              <span className=\"font-medium\">2.5s</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">累积布局偏移 (CLS)</span>\n              <span className=\"font-medium\">0.15</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">总阻塞时间 (TBT)</span>\n              <span className=\"font-medium\">350ms</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">优化后</h3>\n          <div className=\"space-y-3\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">首次内容绘制 (FCP)</span>\n              <span className=\"font-medium text-green-600\">1.1s (-39%)</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">最大内容绘制 (LCP)</span>\n              <span className=\"font-medium text-green-600\">1.6s (-36%)</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">累积布局偏移 (CLS)</span>\n              <span className=\"font-medium text-green-600\">0.05 (-67%)</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">总阻塞时间 (TBT)</span>\n              <span className=\"font-medium text-green-600\">180ms (-49%)</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 当前测试结果 */}\n      {loadTime > 0 && (\n        <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n          <h3 className=\"text-lg font-semibold mb-4\">当前测试结果</h3>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-600\">模拟页面加载时间</p>\n              <p className=\"text-2xl font-bold\">\n                {loadTime}ms\n                {optimizationEnabled && (\n                  <span className=\"text-green-600 text-sm ml-2\">✓ 已优化</span>\n                )}\n              </p>\n            </div>\n            <div className={`px-3 py-1 rounded-full text-sm font-medium ${\n              optimizationEnabled \n                ? 'bg-green-100 text-green-800' \n                : 'bg-yellow-100 text-yellow-800'\n            }`}>\n              {optimizationEnabled ? '优化模式' : '标准模式'}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* 优化技术详解 */}\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n        <h2 className=\"text-xl font-semibold mb-4\">优化技术详解</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div>\n            <h3 className=\"font-medium mb-3 text-blue-600\">关键CSS内联</h3>\n            <ul className=\"space-y-2 text-sm text-gray-600\">\n              <li>• 提取首屏关键CSS并内联到HTML中</li>\n              <li>• 减少渲染阻塞资源数量</li>\n              <li>• 提升首次内容绘制速度</li>\n              <li>• 异步加载非关键CSS</li>\n            </ul>\n          </div>\n          \n          <div>\n            <h3 className=\"font-medium mb-3 text-green-600\">资源预加载</h3>\n            <ul className=\"space-y-2 text-sm text-gray-600\">\n              <li>• 使用link rel=\"preload\"预加载关键资源</li>\n              <li>• 智能预测用户行为预加载</li>\n              <li>• DNS预解析和预连接</li>\n              <li>• 优化资源加载优先级</li>\n            </ul>\n          </div>\n          \n          <div>\n            <h3 className=\"font-medium mb-3 text-purple-600\">渲染阻塞优化</h3>\n            <ul className=\"space-y-2 text-sm text-gray-600\">\n              <li>• 延迟加载非关键JavaScript</li>\n              <li>• 异步加载第三方脚本</li>\n              <li>• 优化字体加载策略</li>\n              <li>• 减少重排和重绘</li>\n            </ul>\n          </div>\n          \n          <div>\n            <h3 className=\"font-medium mb-3 text-orange-600\">布局优化</h3>\n            <ul className=\"space-y-2 text-sm text-gray-600\">\n              <li>• 预留图片和广告空间</li>\n              <li>• 使用CSS containment</li>\n              <li>• 优化动画性能</li>\n              <li>• 减少布局抖动</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      {/* 实施建议 */}\n      <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6\">\n        <h2 className=\"text-xl font-semibold mb-4\">实施建议</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"text-center\">\n            <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <span className=\"text-blue-600 font-bold text-xl\">1</span>\n            </div>\n            <h3 className=\"font-medium mb-2\">分析关键路径</h3>\n            <p className=\"text-sm text-gray-600\">\n              使用Chrome DevTools的Performance面板分析渲染阻塞资源\n            </p>\n          </div>\n          \n          <div className=\"text-center\">\n            <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <span className=\"text-green-600 font-bold text-xl\">2</span>\n            </div>\n            <h3 className=\"font-medium mb-2\">优化CSS加载</h3>\n            <p className=\"text-sm text-gray-600\">\n              内联关键CSS，异步加载非关键样式，使用媒体查询优化\n            </p>\n          </div>\n          \n          <div className=\"text-center\">\n            <div className=\"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <span className=\"text-purple-600 font-bold text-xl\">3</span>\n            </div>\n            <h3 className=\"font-medium mb-2\">预加载关键资源</h3>\n            <p className=\"text-sm text-gray-600\">\n              使用preload、prefetch、preconnect优化资源加载顺序\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}