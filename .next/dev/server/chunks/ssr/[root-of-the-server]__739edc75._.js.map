{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Downloads/nextjs-app-router-large/lib/http.ts"],"sourcesContent":["// lib/http.ts\n// 在服务器组件/Route Handler 中构造绝对 baseUrl，避免相对路径问题\nimport { headers } from \"next/headers\";\n\nexport async function getBaseUrl() {\n  const h = await headers();\n  const proto = h.get(\"x-forwarded-proto\") || \"http\";\n  const host = h.get(\"host\") || \"localhost:3000\";\n  return `${proto}://${host}`;\n}\n"],"names":[],"mappings":"AAAA,cAAc;AACd,8CAA8C;;;;;AAC9C;;AAEO,eAAe;IACpB,MAAM,IAAI,MAAM,IAAA,0IAAO;IACvB,MAAM,QAAQ,EAAE,GAAG,CAAC,wBAAwB;IAC5C,MAAM,OAAO,EAAE,GAAG,CAAC,WAAW;IAC9B,OAAO,GAAG,MAAM,GAAG,EAAE,MAAM;AAC7B"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Downloads/nextjs-app-router-large/app/server/page.tsx"],"sourcesContent":["import { getBaseUrl } from \"@/lib/http\";\n\n// 在服务器组件中演示 Data Cache 与 no-store\nexport default async function ServerCacheDemoPage() {\n  const baseUrl = await getBaseUrl();\n\n  // Data Cache：通过 tags + revalidate 控制数据缓存；注意这只是数据缓存，不是整页缓存\n  const dataCacheRes = await fetch(`${baseUrl}/api/posts`, {\n    next: { tags: [\"posts\"], revalidate: 120 },\n  });\n  const dataCache = await dataCacheRes.json();\n\n  // no-store：每次请求均直达源头，不参与缓存\n  const noStoreRes = await fetch(`${baseUrl}/api/posts?delay=500`, { cache: \"no-store\" });\n  const noStore = await noStoreRes.json();\n\n  return (\n    <div>\n      <section>\n        <h2>服务器组件：数据缓存（Data Cache）</h2>\n        <p>fetch 配置 next(tags=['posts'], revalidate=120)，与 revalidateTag 配合可按需重验证。</p>\n        <pre>时间戳（data cache）：{new Date(dataCache.ts).toLocaleString()}</pre>\n        <pre>帖子数量：{dataCache.posts.length}</pre>\n      </section>\n      <section>\n        <h2>服务器组件：no-store</h2>\n        <p>fetch 配置 cache='no-store'，每次渲染都会重新获取数据。</p>\n        <pre>时间戳（no-store）：{new Date(noStore.ts).toLocaleString()}</pre>\n        <pre>帖子数量：{noStore.posts.length}</pre>\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAGe,eAAe;IAC5B,MAAM,UAAU,MAAM,IAAA,yHAAU;IAEhC,0DAA0D;IAC1D,MAAM,eAAe,MAAM,MAAM,GAAG,QAAQ,UAAU,CAAC,EAAE;QACvD,MAAM;YAAE,MAAM;gBAAC;aAAQ;YAAE,YAAY;QAAI;IAC3C;IACA,MAAM,YAAY,MAAM,aAAa,IAAI;IAEzC,2BAA2B;IAC3B,MAAM,aAAa,MAAM,MAAM,GAAG,QAAQ,oBAAoB,CAAC,EAAE;QAAE,OAAO;IAAW;IACrF,MAAM,UAAU,MAAM,WAAW,IAAI;IAErC,qBACE,8OAAC;;0BACC,8OAAC;;kCACC,8OAAC;kCAAG;;;;;;kCACJ,8OAAC;kCAAE;;;;;;kCACH,8OAAC;;4BAAI;4BAAiB,IAAI,KAAK,UAAU,EAAE,EAAE,cAAc;;;;;;;kCAC3D,8OAAC;;4BAAI;4BAAM,UAAU,KAAK,CAAC,MAAM;;;;;;;;;;;;;0BAEnC,8OAAC;;kCACC,8OAAC;kCAAG;;;;;;kCACJ,8OAAC;kCAAE;;;;;;kCACH,8OAAC;;4BAAI;4BAAe,IAAI,KAAK,QAAQ,EAAE,EAAE,cAAc;;;;;;;kCACvD,8OAAC;;4BAAI;4BAAM,QAAQ,KAAK,CAAC,MAAM;;;;;;;;;;;;;;;;;;;AAIvC"}}]
}