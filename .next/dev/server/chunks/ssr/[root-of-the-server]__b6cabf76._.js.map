{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Downloads/nextjs-app-router-large/lib/http.ts"],"sourcesContent":["// lib/http.ts\n// 在服务器组件/Route Handler 中构造绝对 baseUrl，避免相对路径问题\nimport { headers } from \"next/headers\";\n\nexport async function getBaseUrl() {\n  const h = await headers();\n  const proto = h.get(\"x-forwarded-proto\") || \"http\";\n  const host = h.get(\"host\") || \"localhost:3000\";\n  return `${proto}://${host}`;\n}\n"],"names":[],"mappings":"AAAA,cAAc;AACd,8CAA8C;;;;;AAC9C;;AAEO,eAAe;IACpB,MAAM,IAAI,MAAM,IAAA,0IAAO;IACvB,MAAM,QAAQ,EAAE,GAAG,CAAC,wBAAwB;IAC5C,MAAM,OAAO,EAAE,GAAG,CAAC,WAAW;IAC9B,OAAO,GAAG,MAAM,GAAG,EAAE,MAAM;AAC7B"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Downloads/nextjs-app-router-large/app/components/SubmitButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/SubmitButton.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/SubmitButton.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAmS,GAChU,iEACA","ignoreList":[0]}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Downloads/nextjs-app-router-large/app/components/SubmitButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/components/SubmitButton.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/components/SubmitButton.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+Q,GAC5S,6CACA","ignoreList":[0]}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Downloads/nextjs-app-router-large/app/mutations/page.tsx"],"sourcesContent":["import { list } from \"@/lib/db\";\nimport { createPost, updatePost, deletePost } from \"./actions\";\nimport { getBaseUrl } from \"@/lib/http\";\nimport SubmitButton from \"@/app/components/SubmitButton\";\n\nfunction PostsList() {\n  const posts = list();\n  return (\n    <ul>\n      {posts.map((p) => (\n        <li key={p.id}>\n          <strong>#{p.id} {p.title}</strong>\n          <div><small>{new Date(p.createdAt).toLocaleString()}</small></div>\n          <div>{p.body}</div>\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nfunction SectionTitle({ children }: { children: React.ReactNode }) {\n  return <h3 style={{ marginTop: \"0.5rem\" }}>{children}</h3>;\n}\n\nexport default async function MutationsPage() {\n  // 也可以在此展示通过内部 API 获取的数据\n  const baseUrl = await getBaseUrl();\n  const res = await fetch(`${baseUrl}/api/posts`, { cache: \"no-store\" });\n  const data = await res.json();\n\n  return (\n    <div>\n      <h2>Server Actions：创建 / 更新 / 删除 与按需重验证</h2>\n      <p>提交表单后，会调用 Server Actions 对内存数据进行变更，并执行 revalidateTag('posts') 与对相关页面的 revalidatePath。</p>\n\n      <section>\n        <SectionTitle>当前帖子（来自 API）</SectionTitle>\n        <pre>数量：{data.posts.length}，时间戳：{new Date(data.ts).toLocaleString()}</pre>\n      </section>\n\n      <section>\n        <SectionTitle>创建帖子</SectionTitle>\n        <form action={createPost}>\n          <label>标题</label>\n          <input name=\"title\" placeholder=\"输入标题\" />\n          <label>内容</label>\n          <textarea name=\"body\" placeholder=\"输入内容\" />\n          <SubmitButton>创建</SubmitButton>\n        </form>\n      </section>\n\n      <section>\n        <SectionTitle>更新帖子</SectionTitle>\n        <form action={updatePost}>\n          <label>帖子 ID</label>\n          <input name=\"id\" placeholder=\"例如 1\" />\n          <label>新标题（可选）</label>\n          <input name=\"title\" placeholder=\"新标题\" />\n          <label>新内容（可选）</label>\n          <textarea name=\"body\" placeholder=\"新内容\" />\n          <SubmitButton>更新</SubmitButton>\n        </form>\n      </section>\n\n      <section>\n        <SectionTitle>删除帖子</SectionTitle>\n        <form action={deletePost}>\n          <label>帖子 ID</label>\n          <input name=\"id\" placeholder=\"例如 1\" />\n          <SubmitButton>删除</SubmitButton>\n        </form>\n      </section>\n\n      <section>\n        <SectionTitle>服务器侧渲染的帖子列表（直接读取内存层）</SectionTitle>\n        <PostsList />\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,SAAS;IACP,MAAM,QAAQ,IAAA,iHAAI;IAClB,qBACE,8OAAC;kBACE,MAAM,GAAG,CAAC,CAAC,kBACV,8OAAC;;kCACC,8OAAC;;4BAAO;4BAAE,EAAE,EAAE;4BAAC;4BAAE,EAAE,KAAK;;;;;;;kCACxB,8OAAC;kCAAI,cAAA,8OAAC;sCAAO,IAAI,KAAK,EAAE,SAAS,EAAE,cAAc;;;;;;;;;;;kCACjD,8OAAC;kCAAK,EAAE,IAAI;;;;;;;eAHL,EAAE,EAAE;;;;;;;;;;AAQrB;AAEA,SAAS,aAAa,EAAE,QAAQ,EAAiC;IAC/D,qBAAO,8OAAC;QAAG,OAAO;YAAE,WAAW;QAAS;kBAAI;;;;;;AAC9C;AAEe,eAAe;IAC5B,wBAAwB;IACxB,MAAM,UAAU,MAAM,IAAA,yHAAU;IAChC,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,UAAU,CAAC,EAAE;QAAE,OAAO;IAAW;IACpE,MAAM,OAAO,MAAM,IAAI,IAAI;IAE3B,qBACE,8OAAC;;0BACC,8OAAC;0BAAG;;;;;;0BACJ,8OAAC;0BAAE;;;;;;0BAEH,8OAAC;;kCACC,8OAAC;kCAAa;;;;;;kCACd,8OAAC;;4BAAI;4BAAI,KAAK,KAAK,CAAC,MAAM;4BAAC;4BAAM,IAAI,KAAK,KAAK,EAAE,EAAE,cAAc;;;;;;;;;;;;;0BAGnE,8OAAC;;kCACC,8OAAC;kCAAa;;;;;;kCACd,8OAAC;wBAAK,QAAQ,yIAAU;;0CACtB,8OAAC;0CAAM;;;;;;0CACP,8OAAC;gCAAM,MAAK;gCAAQ,aAAY;;;;;;0CAChC,8OAAC;0CAAM;;;;;;0CACP,8OAAC;gCAAS,MAAK;gCAAO,aAAY;;;;;;0CAClC,8OAAC,6IAAY;0CAAC;;;;;;;;;;;;;;;;;;0BAIlB,8OAAC;;kCACC,8OAAC;kCAAa;;;;;;kCACd,8OAAC;wBAAK,QAAQ,yIAAU;;0CACtB,8OAAC;0CAAM;;;;;;0CACP,8OAAC;gCAAM,MAAK;gCAAK,aAAY;;;;;;0CAC7B,8OAAC;0CAAM;;;;;;0CACP,8OAAC;gCAAM,MAAK;gCAAQ,aAAY;;;;;;0CAChC,8OAAC;0CAAM;;;;;;0CACP,8OAAC;gCAAS,MAAK;gCAAO,aAAY;;;;;;0CAClC,8OAAC,6IAAY;0CAAC;;;;;;;;;;;;;;;;;;0BAIlB,8OAAC;;kCACC,8OAAC;kCAAa;;;;;;kCACd,8OAAC;wBAAK,QAAQ,yIAAU;;0CACtB,8OAAC;0CAAM;;;;;;0CACP,8OAAC;gCAAM,MAAK;gCAAK,aAAY;;;;;;0CAC7B,8OAAC,6IAAY;0CAAC;;;;;;;;;;;;;;;;;;0BAIlB,8OAAC;;kCACC,8OAAC;kCAAa;;;;;;kCACd,8OAAC;;;;;;;;;;;;;;;;;AAIT"}}]
}