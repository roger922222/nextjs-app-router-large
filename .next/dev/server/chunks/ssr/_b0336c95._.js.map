{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Downloads/nextjs-app-router-large/lib/db.ts"],"sourcesContent":["// lib/db.ts\n// 简单的内存数据层。注意：在生产环境中应替换为真实数据库。\n\nexport type Post = {\n  id: number;\n  title: string;\n  body: string;\n  createdAt: number; // unix ms\n};\n\nlet _id = 3;\nconst posts: Post[] = [\n  { id: 1, title: \"Hello Next.js\", body: \"欢迎使用 App Router！\", createdAt: Date.now() - 1000 * 60 * 60 },\n  { id: 2, title: \"Server Components\", body: \"默认在服务端获取数据，支持流式渲染。\", createdAt: Date.now() - 1000 * 60 * 30 },\n  { id: 3, title: \"SWR & React Query\", body: \"在客户端进行数据获取与变更。\", createdAt: Date.now() - 1000 * 60 * 10 },\n];\n\nexport function list(): Post[] {\n  return posts.slice().sort((a, b) => b.createdAt - a.createdAt);\n}\n\nexport function get(id: number): Post | undefined {\n  return posts.find((p) => p.id === id);\n}\n\nexport function create(input: { title: string; body: string }): Post {\n  const post: Post = {\n    id: ++_id,\n    title: input.title ?? \"Untitled\",\n    body: input.body ?? \"\",\n    createdAt: Date.now(),\n  };\n  posts.push(post);\n  return post;\n}\n\nexport function update(id: number, patch: Partial<Pick<Post, \"title\" | \"body\">>): Post | undefined {\n  const p = posts.find((x) => x.id === id);\n  if (!p) return undefined;\n  if (typeof patch.title === \"string\") p.title = patch.title;\n  if (typeof patch.body === \"string\") p.body = patch.body;\n  return p;\n}\n\nexport function remove(id: number): boolean {\n  const idx = posts.findIndex((x) => x.id === id);\n  if (idx >= 0) {\n    posts.splice(idx, 1);\n    return true;\n  }\n  return false;\n}\n"],"names":[],"mappings":"AAAA,YAAY;AACZ,+BAA+B;;;;;;;;;;;;;AAS/B,IAAI,MAAM;AACV,MAAM,QAAgB;IACpB;QAAE,IAAI;QAAG,OAAO;QAAiB,MAAM;QAAoB,WAAW,KAAK,GAAG,KAAK,OAAO,KAAK;IAAG;IAClG;QAAE,IAAI;QAAG,OAAO;QAAqB,MAAM;QAAsB,WAAW,KAAK,GAAG,KAAK,OAAO,KAAK;IAAG;IACxG;QAAE,IAAI;QAAG,OAAO;QAAqB,MAAM;QAAkB,WAAW,KAAK,GAAG,KAAK,OAAO,KAAK;IAAG;CACrG;AAEM,SAAS;IACd,OAAO,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,GAAG,EAAE,SAAS;AAC/D;AAEO,SAAS,IAAI,EAAU;IAC5B,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;AACpC;AAEO,SAAS,OAAO,KAAsC;IAC3D,MAAM,OAAa;QACjB,IAAI,EAAE;QACN,OAAO,MAAM,KAAK,IAAI;QACtB,MAAM,MAAM,IAAI,IAAI;QACpB,WAAW,KAAK,GAAG;IACrB;IACA,MAAM,IAAI,CAAC;IACX,OAAO;AACT;AAEO,SAAS,OAAO,EAAU,EAAE,KAA4C;IAC7E,MAAM,IAAI,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACrC,IAAI,CAAC,GAAG,OAAO;IACf,IAAI,OAAO,MAAM,KAAK,KAAK,UAAU,EAAE,KAAK,GAAG,MAAM,KAAK;IAC1D,IAAI,OAAO,MAAM,IAAI,KAAK,UAAU,EAAE,IAAI,GAAG,MAAM,IAAI;IACvD,OAAO;AACT;AAEO,SAAS,OAAO,EAAU;IAC/B,MAAM,MAAM,MAAM,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC5C,IAAI,OAAO,GAAG;QACZ,MAAM,MAAM,CAAC,KAAK;QAClB,OAAO;IACT;IACA,OAAO;AACT"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Downloads/nextjs-app-router-large/app/mutations/actions.ts"],"sourcesContent":["\"use server\";\nimport { create, update, remove } from \"@/lib/db\";\nimport { revalidatePath, revalidateTag } from \"next/cache\";\n\nexport async function createPost(formData: FormData) {\n  const title = String(formData.get(\"title\") || `SA 新增 ${Date.now()}`);\n  const body = String(formData.get(\"body\") || \"\");\n  const post = create({ title, body });\n\n  // 变更后，按需重验证\n  revalidateTag(\"posts\", \"page\");\n  revalidatePath(\"/client-swr\", \"page\");\n  revalidatePath(\"/client-react-query\", \"page\");\n  revalidatePath(\"/server\", \"page\");\n}\n\nexport async function updatePost(formData: FormData) {\n  const id = Number(formData.get(\"id\"));\n  const title = formData.get(\"title\");\n  const body = formData.get(\"body\");\n  const post = update(id, {\n    title: typeof title === \"string\" ? title : undefined,\n    body: typeof body === \"string\" ? body : undefined,\n  });\n  if (!post) return;\n\n  revalidateTag(\"posts\", \"page\");\n  revalidatePath(\"/client-swr\", \"page\");\n  revalidatePath(\"/client-react-query\", \"page\");\n  revalidatePath(\"/server\", \"page\");\n}\n\nexport async function deletePost(formData: FormData) {\n  const id = Number(formData.get(\"id\"));\n  const ok = remove(id);\n  if (!ok) return;\n\n  revalidateTag(\"posts\", \"page\");\n  revalidatePath(\"/client-swr\", \"page\");\n  revalidatePath(\"/client-react-query\", \"page\");\n  revalidatePath(\"/server\", \"page\");\n}\n"],"names":[],"mappings":";;;;;;;;;AACA;AACA;;;;;AAEO,eAAe,WAAW,QAAkB;IACjD,MAAM,QAAQ,OAAO,SAAS,GAAG,CAAC,YAAY,CAAC,MAAM,EAAE,KAAK,GAAG,IAAI;IACnE,MAAM,OAAO,OAAO,SAAS,GAAG,CAAC,WAAW;IAC5C,MAAM,OAAO,IAAA,mHAAM,EAAC;QAAE;QAAO;IAAK;IAElC,YAAY;IACZ,IAAA,8IAAa,EAAC,SAAS;IACvB,IAAA,+IAAc,EAAC,eAAe;IAC9B,IAAA,+IAAc,EAAC,uBAAuB;IACtC,IAAA,+IAAc,EAAC,WAAW;AAC5B;AAEO,eAAe,WAAW,QAAkB;IACjD,MAAM,KAAK,OAAO,SAAS,GAAG,CAAC;IAC/B,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,OAAO,SAAS,GAAG,CAAC;IAC1B,MAAM,OAAO,IAAA,mHAAM,EAAC,IAAI;QACtB,OAAO,OAAO,UAAU,WAAW,QAAQ;QAC3C,MAAM,OAAO,SAAS,WAAW,OAAO;IAC1C;IACA,IAAI,CAAC,MAAM;IAEX,IAAA,8IAAa,EAAC,SAAS;IACvB,IAAA,+IAAc,EAAC,eAAe;IAC9B,IAAA,+IAAc,EAAC,uBAAuB;IACtC,IAAA,+IAAc,EAAC,WAAW;AAC5B;AAEO,eAAe,WAAW,QAAkB;IACjD,MAAM,KAAK,OAAO,SAAS,GAAG,CAAC;IAC/B,MAAM,KAAK,IAAA,mHAAM,EAAC;IAClB,IAAI,CAAC,IAAI;IAET,IAAA,8IAAa,EAAC,SAAS;IACvB,IAAA,+IAAc,EAAC,eAAe;IAC9B,IAAA,+IAAc,EAAC,uBAAuB;IACtC,IAAA,+IAAc,EAAC,WAAW;AAC5B;;;IArCsB;IAYA;IAgBA;;AA5BA,+OAAA;AAYA,+OAAA;AAgBA,+OAAA"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Downloads/nextjs-app-router-large/.next-internal/server/app/mutations/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {createPost as '408c5e2c3c8b9af58c38ae6746d08336c8a3139e76'} from 'ACTIONS_MODULE0'\nexport {deletePost as '40a59b44e35cec663d8ee861f8cf3fdb9eb817451e'} from 'ACTIONS_MODULE0'\nexport {updatePost as '40c74393e8a61feda8b285963aea15e0953ade26d1'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}