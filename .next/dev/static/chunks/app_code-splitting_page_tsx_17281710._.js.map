{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/bytedance/Downloads/nextjs-app-router-large/app/code-splitting/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, Suspense, lazy } from 'react';\n\n// 模拟重型组件\nconst HeavyComponent = () => {\n  // 模拟重型计算\n  const startTime = Date.now();\n  while (Date.now() - startTime < 1000) {\n    // 阻塞1秒模拟重型组件\n  }\n  \n  return (\n    <div className=\"bg-green-100 border border-green-300 rounded-lg p-6\">\n      <h3 className=\"text-lg font-semibold text-green-800 mb-2\">重型组件已加载</h3>\n      <p className=\"text-green-700\">这是一个模拟的重型组件，加载时间约1秒</p>\n    </div>\n  );\n};\n\n// 骨架屏组件\nconst SkeletonLoader = ({ type = 'card' }: { type?: string }) => {\n  if (type === 'chart') {\n    return (\n      <div className=\"bg-white border rounded-lg p-6 animate-pulse\">\n        <div className=\"h-4 bg-gray-200 rounded w-1/4 mb-4\"></div>\n        <div className=\"h-32 bg-gray-200 rounded mb-4\"></div>\n        <div className=\"h-3 bg-gray-200 rounded w-3/4\"></div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"bg-white border rounded-lg p-6 animate-pulse\">\n      <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-4\"></div>\n      <div className=\"h-3 bg-gray-200 rounded w-full mb-2\"></div>\n      <div className=\"h-3 bg-gray-200 rounded w-5/6 mb-2\"></div>\n      <div className=\"h-3 bg-gray-200 rounded w-4/6\"></div>\n      <div className=\"flex mt-4 space-x-2\">\n        <div className=\"h-8 bg-gray-200 rounded w-20\"></div>\n        <div className=\"h-8 bg-gray-200 rounded w-16\"></div>\n      </div>\n    </div>\n  );\n};\n\nexport default function CodeSplittingDemo() {\n  const [showHeavyComponent, setShowHeavyComponent] = useState(false);\n  const [activeDemo, setActiveDemo] = useState('');\n\n  // 模拟动态导入\n  const simulateLazyLoad = () => {\n    setActiveDemo('lazy');\n    setShowHeavyComponent(true);\n  };\n\n  // 模拟路由预加载\n  const simulateRoutePreload = () => {\n    setActiveDemo('preload');\n    // 模拟预加载行为\n    setTimeout(() => {\n      alert('路由预加载完成！相关资源已提前加载到缓存中。');\n    }, 1000);\n  };\n\n  // 模拟代码分割\n  const simulateCodeSplit = () => {\n    setActiveDemo('split');\n    // 模拟代码分割效果\n    setTimeout(() => {\n      alert('代码分割完成！重型组件已按需加载。');\n    }, 800);\n  };\n\n  return (\n    <div className=\"p-8 max-w-6xl mx-auto\">\n      <div className=\"text-center mb-8\">\n        <h1 className=\"text-3xl font-bold mb-4\">代码分割与懒加载演示</h1>\n        <p className=\"text-gray-600\">\n          展示动态导入、Suspense边界、路由预加载和骨架屏技术\n        </p>\n      </div>\n\n      {/* 控制面板 */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">懒加载演示</h3>\n          <p className=\"text-sm text-gray-600 mb-4\">按需加载重型组件，减少初始包大小</p>\n          <button \n            onClick={simulateLazyLoad}\n            className=\"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700\"\n          >\n            加载重型组件\n          </button>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">路由预加载</h3>\n          <p className=\"text-sm text-gray-600 mb-4\">智能预加载用户可能访问的页面</p>\n          <button \n            onClick={simulateRoutePreload}\n            className=\"w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700\"\n          >\n            模拟预加载\n          </button>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">代码分割</h3>\n          <p className=\"text-sm text-gray-600 mb-4\">将代码分割成更小的块，按需加载</p>\n          <button \n            onClick={simulateCodeSplit}\n            className=\"w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700\"\n          >\n            执行代码分割\n          </button>\n        </div>\n      </div>\n\n      {/* 演示区域 */}\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n        <h3 className=\"text-lg font-semibold mb-4\">演示区域</h3>\n        \n        {activeDemo === 'lazy' && (\n          <div className=\"mb-6\">\n            <h4 className=\"font-medium mb-3\">Suspense 懒加载演示</h4>\n            <Suspense fallback={<SkeletonLoader />}>\n              {showHeavyComponent && <HeavyComponent />}\n            </Suspense>\n          </div>\n        )}\n\n        {activeDemo === 'split' && (\n          <div className=\"mb-6\">\n            <h4 className=\"font-medium mb-3\">代码分割效果</h4>\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n              <p className=\"text-blue-800\">\n                ✅ 代码分割完成！重型组件已按需加载，初始包大小减少约60%。\n              </p>\n            </div>\n          </div>\n        )}\n\n        {activeDemo === 'preload' && (\n          <div className=\"mb-6\">\n            <h4 className=\"font-medium mb-3\">路由预加载效果</h4>\n          </div>\n        )}\n\n        {!activeDemo && (\n          <div className=\"text-center py-8 text-gray-500\">\n            <p>点击上方按钮开始演示不同的代码分割和懒加载技术</p>\n          </div>\n        )}\n      </div>\n\n      {/* 骨架屏展示 */}\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n        <h3 className=\"text-lg font-semibold mb-4\">骨架屏组件展示</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div>\n            <h4 className=\"font-medium mb-3\">卡片骨架屏</h4>\n            <SkeletonLoader type=\"card\" />\n          </div>\n          <div>\n            <h4 className=\"font-medium mb-3\">图表骨架屏</h4>\n            <SkeletonLoader type=\"chart\" />\n          </div>\n        </div>\n      </div>\n\n      {/* 性能对比 */}\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n        <h3 className=\"text-lg font-semibold mb-4\">性能对比</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div className=\"p-4 bg-red-50 rounded-lg\">\n            <h4 className=\"font-semibold text-red-800 mb-2\">❌ 优化前</h4>\n            <ul className=\"text-sm text-red-700 space-y-1\">\n              <li>• 初始包大小: 500KB</li>\n              <li>• 加载时间: 3.2s</li>\n              <li>• 首次交互: 4.1s</li>\n              <li>• 用户体验: 较差</li>\n            </ul>\n          </div>\n          \n          <div className=\"p-4 bg-green-50 rounded-lg\">\n            <h4 className=\"font-semibold text-green-800 mb-2\">✅ 优化后</h4>\n            <ul className=\"text-sm text-green-700 space-y-1\">\n              <li>• 初始包大小: 200KB (-60%)</li>\n              <li>• 加载时间: 1.5s (-53%)</li>\n              <li>• 首次交互: 2.1s (-49%)</li>\n              <li>• 用户体验: 显著提升</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      {/* 技术说明 */}\n      <div className=\"bg-gray-50 rounded-lg p-6\">\n        <h3 className=\"text-xl font-bold mb-4\">技术实现说明</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm\">\n          <div>\n            <h4 className=\"font-semibold mb-2\">动态导入 (Dynamic Import)</h4>\n            <ul className=\"space-y-1 text-gray-600\">\n              <li>• 使用 import() 语法实现代码分割</li>\n              <li>• 自动创建分离的代码块</li>\n              <li>• 按需加载减少初始包大小</li>\n              <li>• 支持预加载和预获取</li>\n            </ul>\n          </div>\n          <div>\n            <h4 className=\"font-semibold mb-2\">Suspense 边界</h4>\n            <ul className=\"space-y-1 text-gray-600\">\n              <li>• 提供优雅的加载状态管理</li>\n              <li>• 支持嵌套的异步组件</li>\n              <li>• 统一的错误处理机制</li>\n              <li>• 提升用户体验</li>\n            </ul>\n          </div>\n          <div>\n            <h4 className=\"font-semibold mb-2\">路由预加载</h4>\n            <ul className=\"space-y-1 text-gray-600\">\n              <li>• 基于用户行为的智能预加载</li>\n              <li>• 视口内链接的自动预加载</li>\n              <li>• 减少页面切换延迟</li>\n              <li>• 优化网络资源使用</li>\n            </ul>\n          </div>\n          <div>\n            <h4 className=\"font-semibold mb-2\">骨架屏 (Skeleton Screen)</h4>\n            <ul className=\"space-y-1 text-gray-600\">\n              <li>• 提供视觉加载反馈</li>\n              <li>• 减少用户感知加载时间</li>\n              <li>• 支持多种布局和样式</li>\n              <li>• 提升整体用户体验</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}